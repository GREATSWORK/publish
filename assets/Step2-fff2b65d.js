import{r as i,e as k,f as w,u as C,n as $,p as B,j as e,t as R,a as z,v as g,w as N}from"./index-ff6bc3cd.js";import{P as F}from"./Page-0e90bb1b.js";import{S}from"./react-select.esm-ccfa10c8.js";import{I as M,a as q,b as U,c as G,g as H}from"./IconTransmission-57be3744.js";import{I as Y}from"./IconSeat-5ed34f75.js";import{f as O}from"./formatNumber-38c26ec4.js";import"./Select-aecb2a80.esm-c7b21fbd.js";function J(t){const[u,r]=i.useState(!1),{rental:n,offer:p}=k(f=>f.booking),d=w(),c=C();i.useEffect(()=>{p!=null&&u&&(async()=>(await c($({item:{abbrev:"RD",name:"Rental Days",quantity:n.numberOfDays,price:p.precio}})),await c(B()),d("/booking/step-3")))()},[c,p]);const m=async f=>{r(!0),await c(R({offer:f}))};return t.Oferta&&e.jsx("div",{className:"col-12 col-md-6 ",children:e.jsxs("div",{className:"row p-3 shadow rounded position-relative",children:[e.jsxs("div",{className:"col-10 pt-5",children:[e.jsx("h1",{children:t.Oferta.nombre}),e.jsx("p",{children:t.Oferta.tipoVehiculo}),e.jsx("img",{src:t.Oferta.imagen,className:"img-fluid",alt:"..."})]}),e.jsxs("div",{className:"col-2 px-2 py-5 d-md-block",children:[e.jsx("div",{className:"col mt-3",children:e.jsxs("button",{type:"button",className:"position-relative mt-3 btn btn-primary rounded-circle","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Seats",children:[e.jsx(Y,{}),e.jsx("span",{className:"text-white position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{backgroundColor:"#000"},children:t.Oferta.asientos})]})}),e.jsx("div",{className:"col mt-3",children:e.jsxs("button",{type:"button",className:"position-relative mt-3 btn btn-primary rounded-circle","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Doors",children:[e.jsx(M,{}),e.jsx("span",{className:"text-white position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{backgroundColor:"#000"},children:t.Oferta.puertas})]})}),e.jsx("div",{className:"col mt-3",children:e.jsxs("button",{type:"button",className:"position-relative mt-3 btn btn-primary rounded-circle","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Suitcases",children:[e.jsx(q,{}),e.jsx("span",{className:"text-white position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{backgroundColor:"#000"},children:t.Oferta.maletas})]})}),e.jsx("div",{className:"col mt-3",children:e.jsxs("button",{type:"button",className:"position-relative mt-3 btn btn-primary rounded-circle","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Age minimun required",children:[e.jsx(U,{}),e.jsx("span",{className:"text-white position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{backgroundColor:"#000"},children:t.Oferta.edadMinima})]})}),e.jsx("div",{className:"col mt-3",children:e.jsxs("button",{type:"button",className:"position-relative mt-3 btn btn-primary rounded-circle","data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Transmission",children:[e.jsx(G,{}),e.jsx("span",{className:"text-white position-absolute top-0 start-100 translate-middle badge rounded-pill",style:{backgroundColor:"#000"},children:t.Oferta.transmision?"A":"M"})]})})]}),e.jsxs("div",{className:"col-8  p-0 justify-content-start ",children:[e.jsxs("span",{className:"price-section__left__dayprice",style:{fontSize:"35px",display:"block",textAlign:"left"},children:[e.jsx("small",{style:{fontSize:"10px",whiteSpace:"nowrap"},children:"per Day:"}),"$ ",O(t.Oferta.precio)]}),e.jsxs("span",{className:"price-section__left__dayprice",style:{fontSize:"15px",display:"block",textAlign:"left"},children:[e.jsx("small",{style:{fontSize:"10px",whiteSpace:"nowrap"},children:"Total:"}),"$ ",O(t.Oferta.precio*n.numberOfDays)]})]}),e.jsx("div",{className:"col-4 p-0 justify-content-end align-items-end d-flex",children:e.jsx("button",{disabled:!t.Oferta.activo,onClick:()=>m(t.Oferta),className:"btn btn-primary btn-grande mt-auto",children:t.Oferta.activo?"Get Offer":"Not available"})})]})})}function ae(){const{rental:t}=k(a=>a.booking);C();const u=w(),[r]=z(),[n,p]=i.useState([]),[d,c]=i.useState([]),[m,f]=i.useState({value:"1",label:"Lowest Price First"}),[h,D]=i.useState(2),[y,A]=i.useState(!1),[b,P]=i.useState([{value:"ALL",label:"All"}]);i.useEffect(()=>{g(t)||u("/booking/step-1")},[u,t]);const T=a=>{f(a)},I=a=>{D(a.target.value)},L=a=>{A(!y)},V=a=>{P(a)};i.useEffect(()=>{r.get("checkInDate"),r.get("checkOutDate"),r.get("checkInTime"),r.get("checkOutTime"),g(t)?(async()=>await H(`${t.pickupDate} ${t.pickupTime}`,`${t.returnDate} ${t.returnTime}`).then(a=>{const o=[...a.data.Data.map(s=>{if(s.Promociones&&s.Promociones.length>0){const x=s.Promociones[0];s.activo=x.activo;const j=x[`dia${t.numberOfDays}`],v=t.numberOfDays<=10&&j>0?j:x.precio;v==0?s.activo=!1:s.precio=v}return s})].sort((s,x)=>s.precio-x.precio);o.map(s=>s.precio=t.numberOfDays<=10?s.precio-s.precio/100*t.numberOfDays:s.precio-s.precio/100*10),p(o)}))():u("/")},[r]),i.useEffect(()=>{if((n==null?void 0:n.length)>1){let a=[...n];m.value==="1"||m.value==="3"?a=a.sort((l,o)=>l.precio-o.precio):m.value==="2"&&(a=a.sort((l,o)=>o.precio-l.precio)),h&&(a=a.filter(l=>l.asientos>=h)),y&&(a=a.filter(l=>l.transmision===!0)),b&&(b.some(l=>l.value==="ALL")||(a=a.filter(l=>b.some(o=>o.value==l.tipoVehiculo))),c(a)),c(a)}},[n,m,h,y,b]);const E=[{value:"1",label:"Lowest Price First"},{value:"2",label:"Highest Price First"},{value:"3",label:"Most Popular"}],_=[{value:"ALL",label:"All"},{value:"SEDAN",label:"SEDAN"},{value:"SUV",label:"SUV"}];return g(t)&&e.jsx(F,{className:"container my-5 py-5",title:"Rent a Car Cusco",children:e.jsxs("div",{className:"container mt-5 pt-5",children:[e.jsxs("div",{className:"row align-items-center justify-content-center mt-3 pt-3",children:[e.jsx("div",{className:"col-12 col-md-3 my-2",children:e.jsx("div",{className:"form-floating",children:e.jsx(S,{styles:N,options:E,value:m,onChange:T})})}),e.jsx("div",{className:"col-12 col-md-3 my-2",children:e.jsx("div",{className:"form-floating",children:e.jsx(S,{styles:N,isMulti:!0,value:b,onChange:V,options:_})})}),e.jsxs("div",{className:"col-12 col-md-3 my-2 d-flex flex-column align-items-center justify-content-center",children:[e.jsxs("label",{htmlFor:"customRange1",className:"form-label",children:["Seat Number ",h]}),e.jsx("input",{type:"range",className:"form-range",min:"2",max:"6",step:"2",id:"customRange1",value:h,onChange:I})]}),e.jsx("div",{className:"col-12 col-md-3 my-2 d-flex align-items-center justify-content-center",children:e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input ",type:"checkbox",value:y,onChange:L,id:"flexSwitchCheckChecked"}),e.jsx("label",{className:"form-check-label",htmlFor:"flexSwitchCheckChecked",children:"Automatic Only"})]})})]}),e.jsx("div",{className:"row g-5 h-100 py-5",children:(d==null?void 0:d.length)>0&&d.map(a=>e.jsx(J,{Oferta:a},a.id))})]})})}export{ae as default};
